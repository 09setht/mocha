<!DOCTYPE html><html><head><title>Mocha - API documentation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="stylesheet" href="style.css"><script src="jquery.js"></script><script src="docs.js"></script></head><body><div id="content"><h1>Mocha</h1><div id="JSONReporter" class="comment"><h2>JSONReporter()</h2><div class="description"><p>Initialize a new <code>JSON</code> reporter.</p></div><h3>Source</h3><pre><code>function JSONReporter(runner) {
  var self = this;
  Base.call(this, runner);

  var tests = []
    , failures = []
    , passes = [];

  runner.on('test end', function(test){
    tests.push(test);
  });

  runner.on('pass', function(test){
    passes.push(test);
  });

  runner.on('fail', function(test){
    failures.push(test);
  });

  runner.on('end', function(){
    var obj = {
        stats: self.stats
      , tests: tests.map(clean)
      , failures: failures.map(clean)
      , passes: passes.map(clean)
    };

    process.stdout.write(JSON.stringify(obj));
  });
}</code></pre></div><div id="clean" class="comment"><h2>clean()</h2><div class="description"><p>Return a plain-object representation of <code>test</code><br />free of cyclic properties etc.</p></div><h3>Source</h3><pre><code>function clean(test) {
  return {
      title: test.title
    , fullTitle: test.fullTitle()
    , duration: test.duration
  }
}</code></pre></div></div><ul id="menu"><li><a href="#JSONReporter">JSONReporter()</a></li><li><a href="#clean">clean()</a></li></ul></body></html>